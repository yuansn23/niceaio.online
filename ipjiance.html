<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script>
        // 白名单配置
        const TARGET_COUNTRY = 'MY';  // 马来西亚国家代码
        const TARGET_LANGUAGE = 'en'; // 英文环境

        // 设备检测函数
        const isMobileDevice = () => {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        };

        // 语言环境检测
        const checkLanguage = () => {
            const browserLang = navigator.language || navigator.userLanguage;
            return browserLang.toLowerCase().startsWith(TARGET_LANGUAGE);
        };

        // 获取地理位置
        const checkGeoLocation = async () => {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                return data.country === TARGET_COUNTRY;
            } catch (error) {
                console.error('Geo check failed:', error);
                return false;
            }
        };

        // 主验证流程
        const validateAccess = async () => {
            // 设备类型检查
            const isMobile = isMobileDevice();
            // 语言环境检查
            const isTargetLang = checkLanguage();
            // 地理检查
            const isInTargetCountry = await checkGeoLocation();

            // 最终验证
            if (isMobile && isTargetLang && isInTargetCountry) {
               alert(isMobile,isTargetLang,isInTargetCountry);
                // window.location.replace('https://www.qq.com');
            } else {
               alert(isMobile,isTargetLang,isInTargetCountry);
                //window.location.replace('https://www.baidu.com');
            }
        };

        // 页面加载立即执行
        validateAccess();
    </script>
</head>
<body>
    <!-- 备用内容 -->
    <noscript>
        <h1>Please enable JavaScript to continue</h1>
    </noscript>
    <div id="loading" style="display:none;">
        Checking access...
    </div>
</body>
</html>
